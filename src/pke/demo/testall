f=bin/demo/pke
in=src/pke/demo/plaintextMessage
inint1=src/pke/demo/intPlaintext1
inint2=src/pke/demo/intPlaintext2
h=LTV3
g="-use $h"

echo try $h
$f/palisade $g makekey publisher$h
$f/palisade $g makekey subscriber$h
$f/palisade $g makerekey subscriber${h}PUB.txt publisher${h}PRI.txt rekey${h}.txt

$f/palisade $g encrypt $in publisher${h}PUB.txt encrypted${h}.txt
$f/palisade $g reencrypt encrypted${h}.txt rekey${h}.txt reencrypted${h}.txt
$f/palisade $g decrypt reencrypted${h}.txt subscriber${h}PRI.txt cleartextOutput${h}.txt

h=StSt6
g="-use $h"

echo try $h
$f/palisade $g makekey publisher$h
$f/palisade $g makekey subscriber$h
$f/palisade $g makerekey subscriber${h}PUB.txt publisher${h}PRI.txt rekey${h}.txt

$f/palisade $g encrypt $in publisher${h}PUB.txt encrypted${h}.txt
$f/palisade $g reencrypt encrypted${h}.txt rekey${h}.txt reencrypted${h}.txt
$f/palisade $g decrypt reencrypted${h}.txt subscriber${h}PRI.txt cleartextOutput${h}.txt

h=Null
g="-use $h"

echo try $h
$f/palisade $g makekey publisher$h
$f/palisade $g makekey subscriber$h
$f/palisade $g makerekey subscriber${h}PUB.txt publisher${h}PRI.txt rekey${h}.txt

$f/palisade $g encrypt $in publisher${h}PUB.txt encrypted${h}.txt
$f/palisade $g reencrypt encrypted${h}.txt rekey${h}.txt reencrypted${h}.txt
$f/palisade $g decrypt reencrypted${h}.txt subscriber${h}PRI.txt cleartextOutput${h}.txt

echo now try with -from option
h=StSt6-2

$f/palisade $g makekey publisher$h
$f/palisade $g makekey subscriber$h
$f/palisade -from publisher${h}PUB.txt makerekey subscriber${h}PUB.txt publisher${h}PRI.txt rekey${h}.txt

$f/palisade -from publisher${h}PUB.txt encrypt $in publisher${h}PUB.txt encrypted${h}.txt
$f/palisade -from publisher${h}PUB.txt reencrypt encrypted${h}.txt rekey${h}.txt reencrypted${h}.txt
$f/palisade -from publisher${h}PUB.txt decrypt reencrypted${h}.txt subscriber${h}PRI.txt cleartextOutput${h}.txt

echo now trying null and integers
h=Null
g="-use $h"

$f/palisade -integers $g encrypt $inint1 publisher${h}PUB.txt encryptedInt1${h}.txt
$f/palisade -integers $g encrypt $inint2 publisher${h}PUB.txt encryptedInt2${h}.txt
$f/palisade -integers $g decrypt encryptedInt1${h}.txt subscriber${h}PRI.txt cleartextIntOutput${h}.txt

$f/palisade -integers $g evaladd encryptedInt1${h}.txt encryptedInt2${h}.txt encryptedIntAdd${h}.txt
$f/palisade -integers $g evalmult encryptedInt1${h}.txt encryptedInt2${h}.txt encryptedIntMult${h}.txt
$f/palisade -integers $g decrypt encryptedIntAdd${h}.txt publisher${h}PRI.txt cleartextIntAdded${h}.txt
$f/palisade -integers $g decrypt encryptedIntMult${h}.txt publisher${h}PRI.txt cleartextIntMulted${h}.txt
